\lottjudgement{Typing And Elaboration}{\sourcepre Γ_{I} \sourcepost \lottsym{;} \, \sourcepre Γ_{C} \sourcepost \, \lottsym{⊢} \, \sourcepre pgm \sourcepost \, \lottsym{:} \, \sourcepre σ \sourcepost}{
\lottinferencerule{cls}{
\lotthypothesis{\lottjudgementcomprehension{\sourcepre {TCₛ}_{i} \sourcepost \, \lottsym{:} \, \sourcepre κ \sourcepost \, \lottsym{∈} \, \sourcepre Γ_{C} \sourcepost}}\\
\lotthypothesis{\sourcepre TC \sourcepost \, \lottsym{∉} \, \lottkw{dom} \lottsym{(} \sourcepre Γ_{C} \sourcepost \lottsym{)}}\\
\lotthypothesis{\sourcepre m \sourcepost \, \lottsym{∉} \, \lottkw{dom} \lottsym{(} \sourcepre Γ_{C} \sourcepost \lottsym{)}}\\
\lotthypothesis{\sourcepre Γ_{C} \sourcepost \lottsym{;} \, \sourcepre \sourcepre \epsilon \sourcepost \lottsym{,} \, \sourcepre a \sourcepost \, \lottsym{:} \, \sourcepre κ \sourcepost \sourcepost \, \lottsym{⊢} \, \sourcepre \sourcepre σ₀ \sourcepost \sourcepost \, \lottsym{:} \, \sourcepre \star \sourcepost}\\
\lotthypothesis{\sourcepre Γ_{I} \sourcepost \lottsym{;} \, \sourcepre \sourcepre Γ_{C} \sourcepost \lottsym{,} \, \sourcepre \lottsym{(} \lottsepbycomprehension{\sourcepre {TCₛ}_{i} \sourcepost \, \sourcepre a \sourcepost} \, \lottsym{⇒} \, \sourcepre TC \sourcepost \, \sourcepre a \sourcepost \, \lottsym{:} \, \sourcepre κ \sourcepost \lottsym{)} \, \lottsym{↦} \, \sourcepre m \sourcepost \, \lottsym{:} \, \sourcepre σ₀ \sourcepost \sourcepost \sourcepost \, \lottsym{⊢} \, \sourcepre pgm \sourcepost \, \lottsym{:} \, \sourcepre σ₁ \sourcepost}
}{\sourcepre Γ_{I} \sourcepost \lottsym{;} \, \sourcepre Γ_{C} \sourcepost \, \lottsym{⊢} \, \sourcepre \lottkw{class} \, \lottsepbycomprehension{\sourcepre {TCₛ}_{i} \sourcepost \, \sourcepre a \sourcepost} \, \lottsym{⇒} \, \sourcepre TC \sourcepost \, \sourcepre a \sourcepost \, \lottsym{:} \, \sourcepre κ \sourcepost \, \lottkw{where} \, \lottsym{\{} \sourcepre m \sourcepost \, \lottsym{:} \, \sourcepre σ₀ \sourcepost \lottsym{\}} \lottsym{;} \, \sourcepre pgm \sourcepost \sourcepost \, \lottsym{:} \, \sourcepre σ₁ \sourcepost}
\lottinferencerulesep
\lottinferencerule{inst}{
\lotthypothesis{\sourcepre \lottsym{(} \lottsepbycomprehension{\sourcepre {TCₛ}_{i} \sourcepost \, \sourcepre a' \sourcepost} \, \lottsym{⇒} \, \sourcepre TC \sourcepost \, \sourcepre a' \sourcepost \, \lottsym{:} \, \sourcepre κ₀ \sourcepost \lottsym{)} \, \lottsym{↦} \, \sourcepre m \sourcepost \, \lottsym{:} \, \sourcepre σ₀ \sourcepost \sourcepost \, \lottsym{∈} \, \sourcepre Γ_{C} \sourcepost}\\
\lotthypothesis{\lottjudgementcomprehension{\sourcepre Γ_{C} \sourcepost \lottsym{;} \, \sourcepre \sourcepre \epsilon \sourcepost \, \lottsym{,} \, \, \lottsepbycomprehension{\sourcepre {a}_{k} \sourcepost \, \lottsym{:} \, \sourcepre {κ₁}_{k} \sourcepost} \sourcepost \, \lottsym{⊢} \, \sourcepre \sourcepre \sourcepre \sourcepre {ψ}_{j} \sourcepost \sourcepost \sourcepost \sourcepost \, \lottsym{:} \, \sourcepre \lottkw{C} \sourcepost}}\\
\lotthypothesis{\lottjudgementcomprehension{\sourcepre Γ_{I} \sourcepost \lottsym{;} \, \sourcepre Γ_{C} \sourcepost \lottsym{;} \, \sourcepre \sourcepre \sourcepre \epsilon \sourcepost \, \lottsym{,} \, \, \lottsepbycomprehension{\sourcepre {a}_{k} \sourcepost \, \lottsym{:} \, \sourcepre {κ₁}_{k} \sourcepost} \sourcepost \, \lottsym{,} \, \, \lottsepbycomprehension{\sourcepre \sourcepre {ψ}_{j} \sourcepost \sourcepost} \sourcepost \, \lottsym{⊨} \, \sourcepre \sourcepre {TCₛ}_{i} \sourcepost \, \sourcepre \sourcepre τ \sourcepost \sourcepost \sourcepost}}\\
\lotthypothesis{\sourcepre Γ_{C} \sourcepost \lottsym{;} \, \sourcepre \sourcepre \epsilon \sourcepost \, \lottsym{,} \, \, \lottsepbycomprehension{\sourcepre {a}_{k} \sourcepost \, \lottsym{:} \, \sourcepre {κ₁}_{k} \sourcepost} \sourcepost \, \lottsym{⊢} \, \sourcepre \sourcepre \sourcepre \sourcepre τ \sourcepost \sourcepost \sourcepost \sourcepost \, \lottsym{:} \, \sourcepre κ₀ \sourcepost}\\
\lotthypothesis{\sourcepre Γ_{I} \sourcepost \lottsym{;} \, \sourcepre Γ_{C} \sourcepost \lottsym{;} \, \sourcepre \sourcepre \sourcepre \epsilon \sourcepost \, \lottsym{,} \, \, \lottsepbycomprehension{\sourcepre {a}_{k} \sourcepost \, \lottsym{:} \, \sourcepre {κ₁}_{k} \sourcepost} \sourcepost \, \lottsym{,} \, \, \lottsepbycomprehension{\sourcepre \sourcepre {ψ}_{j} \sourcepost \sourcepost} \sourcepost \, \lottsym{⊢} \, \sourcepre \sourcepre \sourcepre M \sourcepost \sourcepost \sourcepost \, \lottsym{:} \, \sourcepre \sourcepre σ₀ \sourcepost\left[\sourcepre \sourcepre \sourcepre τ \sourcepost \sourcepost \sourcepost/\sourcepre a' \sourcepost\right] \sourcepost}\\
\lotthypothesis{\sourcepre \sourcepre Γ_{I} \sourcepost \lottsym{,} \, \sourcepre \lottsym{(} \lottsym{∀} \, \lottsepbycomprehension{\sourcepre {a}_{k} \sourcepost \, \lottsym{:} \, \sourcepre {κ₁}_{k} \sourcepost} \lottsym{.} \, \lottsepbycomprehension{\sourcepre {ψ}_{j} \sourcepost} \, \lottsym{⇒} \, \sourcepre TC \sourcepost \, \sourcepre τ \sourcepost \lottsym{)} \sourcepost \sourcepost \lottsym{;} \, \sourcepre Γ_{C} \sourcepost \, \lottsym{⊢} \, \sourcepre pgm \sourcepost \, \lottsym{:} \, \sourcepre σ₁ \sourcepost}
}{\sourcepre Γ_{I} \sourcepost \lottsym{;} \, \sourcepre Γ_{C} \sourcepost \, \lottsym{⊢} \, \sourcepre \lottkw{instance} \, \lottsepbycomprehension{\sourcepre {ψ}_{j} \sourcepost} \, \lottsym{⇒} \, \sourcepre TC \sourcepost \, \sourcepre τ \sourcepost \, \lottkw{where} \, \lottsym{\{} \sourcepre m \sourcepost \, \lottsym{=} \, \sourcepre M \sourcepost \lottsym{\}} \lottsym{;} \, \sourcepre pgm \sourcepost \sourcepost \, \lottsym{:} \, \sourcepre σ₁ \sourcepost}
\lottinferencerulesep
\lottinferencerule{term}{
\lotthypothesis{\sourcepre Γ_{I} \sourcepost \lottsym{;} \, \sourcepre Γ_{C} \sourcepost \lottsym{;} \, \sourcepre \epsilon \sourcepost \, \lottsym{⊢} \, \sourcepre M \sourcepost \, \lottsym{:} \, \sourcepre σ \sourcepost}
}{\sourcepre Γ_{I} \sourcepost \lottsym{;} \, \sourcepre Γ_{C} \sourcepost \, \lottsym{⊢} \, \sourcepre \sourcepre M \sourcepost \sourcepost \, \lottsym{:} \, \sourcepre σ \sourcepost}
}
