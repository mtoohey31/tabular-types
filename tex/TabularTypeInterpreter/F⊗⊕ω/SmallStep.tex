\lottjudgement{Small Step}{\targetpre Δ \targetpost \, \lottsym{⊢} \, \targetpre A \targetpost \, \lottsym{->} \, \targetpre B \targetpost}{
\lottinferencerule{eta}{
\lotthypothesis{\targetpre Δ \targetpost \, \lottsym{⊢} \, \targetpre A \targetpost \, \lottsym{:} \, \targetpre \targetpre K₁ \targetpost \, \lottsym{↦} \, \targetpre K₂ \targetpost \targetpost}\\
\lotthypothesis{\lottkw{value} \, \targetpre \targetpre A \targetpost \, \targetpre \targetpre a \targetpost \targetpost \targetpost}
}{\targetpre Δ \targetpost \, \lottsym{⊢} \, \targetpre \lottsym{λ} \, \targetpre a \targetpost \, \lottsym{:} \, \targetpre K₁ \targetpost \lottsym{.} \, \targetpre \targetpre A \targetpost \, \targetpre \targetpre a \targetpost \targetpost \targetpost \targetpost \, \lottsym{->} \, \targetpre A \targetpost}
\lottinferencerulesep
\lottinferencerule{lamApp}{
\lotthypothesis{\targetpre Δ \targetpost \, \lottsym{⊢} \, \targetpre \lottsym{λ} \, \targetpre a \targetpost \, \lottsym{:} \, \targetpre K₁ \targetpost \lottsym{.} \, \targetpre A \targetpost \targetpost \, \lottsym{:} \, \targetpre \targetpre K₁ \targetpost \, \lottsym{↦} \, \targetpre K₂ \targetpost \targetpost}\\
\lotthypothesis{\targetpre Δ \targetpost \, \lottsym{⊢} \, \targetpre B \targetpost \, \lottsym{:} \, \targetpre K₁ \targetpost}\\
\lotthypothesis{\lottkw{value} \, \targetpre \lottsym{λ} \, \targetpre a \targetpost \, \lottsym{:} \, \targetpre K₁ \targetpost \lottsym{.} \, \targetpre A \targetpost \targetpost}\\
\lotthypothesis{\lottkw{value} \, \targetpre B \targetpost}
}{\targetpre Δ \targetpost \, \lottsym{⊢} \, \targetpre \targetpre \lottsym{(} \targetpre \lottsym{λ} \, \targetpre a \targetpost \, \lottsym{:} \, \targetpre K₁ \targetpost \lottsym{.} \, \targetpre A \targetpost \targetpost \lottsym{)} \targetpost \, \targetpre B \targetpost \targetpost \, \lottsym{->} \, \targetpre \targetpre A \targetpost\left[\targetpre B \targetpost/\targetpre a \targetpost\right] \targetpost}
\lottinferencerulesep
\lottinferencerule{listAppList}{
\lotthypothesis{\targetpre A \targetpost \, \lottsym{≠} \, \targetpre \lottsym{λ} \, \targetpre a \targetpost \, \lottsym{:} \, \targetpre K \targetpost \lottsym{.} \, \targetpre \targetpre a \targetpost \targetpost \targetpost}\\
\lotthypothesis{\targetpre Δ \targetpost \, \lottsym{⊢} \, \targetpre A \targetpost \, \lottsym{:} \, \targetpre \targetpre K₁ \targetpost \, \lottsym{↦} \, \targetpre K₂ \targetpost \targetpost}\\
\lotthypothesis{\lottkw{value} \, \targetpre A \targetpost}\\
\lotthypothesis{\lottjudgementcomprehensionpatcollection{\lottkw{value} \, \targetpre B_{i} \targetpost}{i}{[:n]}}
}{\targetpre Δ \targetpost \, \lottsym{⊢} \, \targetpre \targetpre A \targetpost \, \lottsym{⟦} \targetpre \lottsym{\{} \lottsepbycomprehensionpatcollection{\targetpre B_{i} \targetpost}{i}{[:n]} \lottsym{\}} \targetpost \lottsym{⟧} \targetpost \, \lottsym{->} \, \targetpre \lottsym{\{} \lottsepbycomprehensionpatcollection{\targetpre \targetpre A \targetpost \, \targetpre B_{i} \targetpost \targetpost}{i}{[:n]} \lottsym{\}} \targetpost}
\lottinferencerulesep
\lottinferencerule{listAppId}{
\lotthypothesis{\targetpre Δ \targetpost \, \lottsym{⊢} \, \targetpre A \targetpost \, \lottsym{:} \, \targetpre \lottkw{L}^{\targetpre K \targetpost} \targetpost}\\
\lotthypothesis{\lottkw{value} \, \targetpre A \targetpost}
}{\targetpre Δ \targetpost \, \lottsym{⊢} \, \targetpre \targetpre \lottsym{(} \targetpre \lottsym{λ} \, \targetpre a \targetpost \, \lottsym{:} \, \targetpre K \targetpost \lottsym{.} \, \targetpre \targetpre a \targetpost \targetpost \targetpost \lottsym{)} \targetpost \, \lottsym{⟦} \targetpre A \targetpost \lottsym{⟧} \targetpost \, \lottsym{->} \, \targetpre A \targetpost}
\lottinferencerulesep
\lottinferencerule{listAppComp}{
\lotthypothesis{\targetpre A₀ \targetpost \, \lottsym{≠} \, \targetpre \lottsym{λ} \, \targetpre a \targetpost \, \lottsym{:} \, \targetpre K' \targetpost \lottsym{.} \, \targetpre \targetpre a \targetpost \targetpost \targetpost}\\
\lotthypothesis{\targetpre Δ \targetpost \, \lottsym{⊢} \, \targetpre A₁ \targetpost \, \lottsym{:} \, \targetpre \targetpre K₁ \targetpost \, \lottsym{↦} \, \targetpre K₂ \targetpost \targetpost}\\
\lotthypothesis{\lottkw{value} \, \targetpre A₀ \targetpost}\\
\lotthypothesis{\lottkw{value} \, \targetpre \targetpre A₁ \targetpost \, \lottsym{⟦} \targetpre B \targetpost \lottsym{⟧} \targetpost}
}{\targetpre Δ \targetpost \, \lottsym{⊢} \, \targetpre \targetpre A₀ \targetpost \, \lottsym{⟦} \targetpre \targetpre A₁ \targetpost \, \lottsym{⟦} \targetpre B \targetpost \lottsym{⟧} \targetpost \lottsym{⟧} \targetpost \, \lottsym{->} \, \targetpre \targetpre \lottsym{(} \targetpre \lottsym{λ} \, \targetpre a \targetpost \, \lottsym{:} \, \targetpre K₁ \targetpost \lottsym{.} \, \targetpre \targetpre A₀ \targetpost \, \targetpre \lottsym{(} \targetpre \targetpre A₁ \targetpost \, \targetpre \targetpre a \targetpost \targetpost \targetpost \lottsym{)} \targetpost \targetpost \targetpost \lottsym{)} \targetpost \, \lottsym{⟦} \targetpre B \targetpost \lottsym{⟧} \targetpost}
\lottinferencerulesep
\lottinferencerule{lam}{
\lotthypothesis{\targetpre \targetpre Δ \targetpost \lottsym{,} \, \targetpre a \targetpost \, \lottsym{:} \, \targetpre K \targetpost \targetpost \, \lottsym{⊢} \, \targetpre \targetpre A \targetpost \targetpost \, \lottsym{->} \, \targetpre \targetpre A' \targetpost \targetpost}
}{\targetpre Δ \targetpost \, \lottsym{⊢} \, \targetpre \lottsym{λ} \, \targetpre a \targetpost \, \lottsym{:} \, \targetpre K \targetpost \lottsym{.} \, \targetpre A \targetpost \targetpost \, \lottsym{->} \, \targetpre \lottsym{λ} \, \targetpre a \targetpost \, \lottsym{:} \, \targetpre K \targetpost \lottsym{.} \, \targetpre A' \targetpost \targetpost}
\lottinferencerulesep
\lottinferencerule{appl}{
\lotthypothesis{\targetpre Δ \targetpost \, \lottsym{⊢} \, \targetpre A \targetpost \, \lottsym{->} \, \targetpre A' \targetpost}
}{\targetpre Δ \targetpost \, \lottsym{⊢} \, \targetpre \targetpre A \targetpost \, \targetpre B \targetpost \targetpost \, \lottsym{->} \, \targetpre \targetpre A' \targetpost \, \targetpre B \targetpost \targetpost}
\lottinferencerulesep
\lottinferencerule{appr}{
\lotthypothesis{\lottkw{value} \, \targetpre A \targetpost}\\
\lotthypothesis{\targetpre Δ \targetpost \, \lottsym{⊢} \, \targetpre B \targetpost \, \lottsym{->} \, \targetpre B' \targetpost}
}{\targetpre Δ \targetpost \, \lottsym{⊢} \, \targetpre \targetpre A \targetpost \, \targetpre B \targetpost \targetpost \, \lottsym{->} \, \targetpre \targetpre A \targetpost \, \targetpre B' \targetpost \targetpost}
\lottinferencerulesep
\lottinferencerule{forall}{
\lotthypothesis{\targetpre \targetpre Δ \targetpost \lottsym{,} \, \targetpre a \targetpost \, \lottsym{:} \, \targetpre K \targetpost \targetpost \, \lottsym{⊢} \, \targetpre \targetpre A \targetpost \targetpost \, \lottsym{->} \, \targetpre \targetpre A' \targetpost \targetpost}
}{\targetpre Δ \targetpost \, \lottsym{⊢} \, \targetpre \lottsym{∀} \, \targetpre a \targetpost \, \lottsym{:} \, \targetpre K \targetpost \lottsym{.} \, \targetpre A \targetpost \targetpost \, \lottsym{->} \, \targetpre \lottsym{∀} \, \targetpre a \targetpost \, \lottsym{:} \, \targetpre K \targetpost \lottsym{.} \, \targetpre A' \targetpost \targetpost}
\lottinferencerulesep
\lottinferencerule{arrl}{
\lotthypothesis{\targetpre Δ \targetpost \, \lottsym{⊢} \, \targetpre A \targetpost \, \lottsym{->} \, \targetpre A' \targetpost}
}{\targetpre Δ \targetpost \, \lottsym{⊢} \, \targetpre \targetpre A \targetpost \, \lottsym{→} \, \targetpre B \targetpost \targetpost \, \lottsym{->} \, \targetpre \targetpre A' \targetpost \, \lottsym{→} \, \targetpre B \targetpost \targetpost}
\lottinferencerulesep
\lottinferencerule{arrr}{
\lotthypothesis{\lottkw{value} \, \targetpre A \targetpost}\\
\lotthypothesis{\targetpre Δ \targetpost \, \lottsym{⊢} \, \targetpre B \targetpost \, \lottsym{->} \, \targetpre B' \targetpost}
}{\targetpre Δ \targetpost \, \lottsym{⊢} \, \targetpre \targetpre A \targetpost \, \lottsym{→} \, \targetpre B \targetpost \targetpost \, \lottsym{->} \, \targetpre \targetpre A \targetpost \, \lottsym{→} \, \targetpre B' \targetpost \targetpost}
\lottinferencerulesep
\lottinferencerule{list}{
\lotthypothesis{\lottjudgementcomprehensionpatcollection{\lottkw{value} \, \targetpre A₀_{i} \targetpost}{i}{[:m]}}\\
\lotthypothesis{\targetpre Δ \targetpost \, \lottsym{⊢} \, \targetpre A₁ \targetpost \, \lottsym{->} \, \targetpre A₁' \targetpost}
}{\targetpre Δ \targetpost \, \lottsym{⊢} \, \targetpre \lottsym{\{} \lottsepbycomprehensionpatcollection{\targetpre A₀_{i} \targetpost}{i}{[:m]} \lottsym{,} \, \targetpre A₁ \targetpost \lottsym{,} \, \lottsepbycomprehensionpatcollection{\targetpre A₂_{j} \targetpost}{j}{[:n]} \lottsym{\}} \targetpost \, \lottsym{->} \, \targetpre \lottsym{\{} \lottsepbycomprehensionpatcollection{\targetpre A₀_{i} \targetpost}{i}{[:m]} \lottsym{,} \, \targetpre A₁' \targetpost \lottsym{,} \, \lottsepbycomprehensionpatcollection{\targetpre A₂_{j} \targetpost}{j}{[:n]} \lottsym{\}} \targetpost}
\lottinferencerulesep
\lottinferencerule{listAppl}{
\lotthypothesis{\targetpre Δ \targetpost \, \lottsym{⊢} \, \targetpre A \targetpost \, \lottsym{->} \, \targetpre A' \targetpost}
}{\targetpre Δ \targetpost \, \lottsym{⊢} \, \targetpre \targetpre A \targetpost \, \lottsym{⟦} \targetpre B \targetpost \lottsym{⟧} \targetpost \, \lottsym{->} \, \targetpre \targetpre A' \targetpost \, \lottsym{⟦} \targetpre B \targetpost \lottsym{⟧} \targetpost}
\lottinferencerulesep
\lottinferencerule{listAppr}{
\lotthypothesis{\lottkw{value} \, \targetpre A \targetpost}\\
\lotthypothesis{\targetpre Δ \targetpost \, \lottsym{⊢} \, \targetpre B \targetpost \, \lottsym{->} \, \targetpre B' \targetpost}
}{\targetpre Δ \targetpost \, \lottsym{⊢} \, \targetpre \targetpre A \targetpost \, \lottsym{⟦} \targetpre B \targetpost \lottsym{⟧} \targetpost \, \lottsym{->} \, \targetpre \targetpre A \targetpost \, \lottsym{⟦} \targetpre B' \targetpost \lottsym{⟧} \targetpost}
\lottinferencerulesep
\lottinferencerule{prod}{
\lotthypothesis{\targetpre Δ \targetpost \, \lottsym{⊢} \, \targetpre A \targetpost \, \lottsym{->} \, \targetpre A' \targetpost}
}{\targetpre Δ \targetpost \, \lottsym{⊢} \, \targetpre \lottsym{⊗} \, \targetpre A \targetpost \targetpost \, \lottsym{->} \, \targetpre \lottsym{⊗} \, \targetpre A' \targetpost \targetpost}
\lottinferencerulesep
\lottinferencerule{sum}{
\lotthypothesis{\targetpre Δ \targetpost \, \lottsym{⊢} \, \targetpre A \targetpost \, \lottsym{->} \, \targetpre A' \targetpost}
}{\targetpre Δ \targetpost \, \lottsym{⊢} \, \targetpre \lottsym{⊕} \, \targetpre A \targetpost \targetpost \, \lottsym{->} \, \targetpre \lottsym{⊕} \, \targetpre A' \targetpost \targetpost}
}
